  <div class="chart-controls">
    <mat-button-toggle-group [(ngModel)]="election" (change)="getData('toggle')" aria-label="Chart Type">
      <mat-button-toggle value="regular">Regular</mat-button-toggle>
      <mat-button-toggle value="pre">Pre Election</mat-button-toggle>
      <mat-button-toggle value="elec">Election</mat-button-toggle>
      <mat-button-toggle value="post">Post Election</mat-button-toggle>
    </mat-button-toggle-group>

    <mat-form-field>
      <mat-label>Select Symbol</mat-label>
      <mat-select [(ngModel)]="stockName" (selectionChange)="getData('dropdown')">
        <mat-option *ngFor="let symbol of stockSymbols" [value]="symbol">
          {{ symbol }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <app-search-bar
      [clearOnDropdown]="clearOnDropdown"
      (suggestionSelected)="handleSuggestion($event)">
    </app-search-bar>
  </div>

  <!-- Calculation Information -->
  <div *ngIf="calculationInfo && !error" class="calculation-info">
    <mat-icon class="info-icon">info_outline</mat-icon>
    <span class="info-text">{{ calculationInfo }}</span>
  </div>

  <div class="chart-content" [class.loading]="isLoading$ | async">
    <div *ngIf="isLoading$ | async" class="loading-overlay">
      <app-loader></app-loader>
      <p class="loading-text">Analyzing Market Data</p>
      <p class="loading-subtext">Please wait while we process seasonal patterns...</p>
    </div>

    <div *ngIf="error" class="error-message">
      <mat-icon color="warn">error_outline</mat-icon>
      <p>{{ error }}</p>
      <button mat-button color="primary" (click)="getData('retry')">Try Again</button>
    </div>

    <canvas [id]="canvasIdSeasonal" [style.display]="(isLoading$ | async) || error ? 'none' : 'block'"></canvas>
  </div>
